<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kids Try-On</title>
  <style>
    body { font-family: sans-serif; max-width: 480px; margin: auto; padding: 1rem; }
    .preview { width: 100%; margin-top: 1rem; text-align: center; }
    canvas { max-width: 100%; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .options { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 1rem; }
    .options img { width: 70px; border: 2px solid transparent; border-radius: 8px; cursor: pointer; }
    .options img.selected { border-color: blue; }
    button { padding: 10px 16px; border: none; border-radius: 8px; background: #007bff; color: #fff; cursor: pointer; }
    button:disabled { background: #aaa; }
    .shop { margin-top: 1rem; }
    .shop a { display: inline-block; background: #ff5722; color: white; padding: 12px 18px; border-radius: 8px; text-decoration: none; font-weight: bold; }
  </style>
</head>
<body>
  <h2>ðŸ‘• Pilih Baju:</h2>
  <div class="options" id="bajuOptions"></div>

  <h2>ðŸ‘– Pilih Celana:</h2>
  <div class="options" id="celanaOptions"></div>

  <input type="file" id="upload" accept="image/*">
  <button id="generate" disabled>Generate Try-On</button>

  <div class="preview">
    <canvas id="canvas"></canvas>
  </div>

  <div class="shop">
    <a href="https://shopee.co.id/ovikids.official" target="_blank">ðŸ›’ Beli di Shopee</a>
  </div>

  <script>
    const bajuFiles = ["baju1.png", "baju2.png", "baju3.png"];
    const celanaFiles = ["celana1.png", "celana2.png", "celana3.png"];

    const bajuOptions = document.getElementById("bajuOptions");
    const celanaOptions = document.getElementById("celanaOptions");
    const upload = document.getElementById("upload");
    const generate = document.getElementById("generate");
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    let uploadedImg = null;
    let selectedBaju = null;
    let selectedCelana = null;

    function renderOptions(container, files, type) {
      files.forEach(f => {
        const img = document.createElement("img");
        img.src = f;
        img.onclick = () => {
          document.querySelectorAll(`#${container.id} img`).forEach(el => el.classList.remove("selected"));
          img.classList.add("selected");
          if (type === "baju") selectedBaju = f;
          else selectedCelana = f;
          if (uploadedImg) generate.disabled = false;
        };
        container.appendChild(img);
      });
    }

    renderOptions(bajuOptions, bajuFiles, "baju");
    renderOptions(celanaOptions, celanaFiles, "celana");

    upload.onchange = (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = ev => {
        uploadedImg = new Image();
        uploadedImg.onload = () => {
          canvas.width = uploadedImg.width;
          canvas.height = uploadedImg.height;
          ctx.drawImage(uploadedImg, 0, 0);
          if (selectedBaju || selectedCelana) generate.disabled = false;
        };
        uploadedImg.src = ev.target.result;
      };
      reader.readAsDataURL(file);
    };

    generate.onclick = () => {
      if (!uploadedImg) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(uploadedImg, 0, 0);

      const height = uploadedImg.height;
      const width = uploadedImg.width;

      // --- BAJU ---
      if (selectedBaju) {
        const baju = new Image();
        baju.onload = () => {
          const bajuWidth = width * 0.7;
          const bajuHeight = height * 0.45;
          const bajuX = width * 0.15;
          const bajuY = height * 0.18; // mulai agak di bawah dagu
          ctx.drawImage(baju, bajuX, bajuY, bajuWidth, bajuHeight);
        };
        baju.src = selectedBaju;
      }


    // --- CELANA ---
if (selectedCelana) {
  const celana = new Image();
  celana.onload = () => {
    const celanaWidth = width * 0.72;   // lebih lebar
    const celanaHeight = height * 0.42; // lebih panjang
    const celanaX = width * 0.14;       // geser sedikit biar center
    const celanaY = height * 0.55;      // mulai dari pinggang
    ctx.drawImage(celana, celanaX, celanaY, celanaWidth, celanaHeight);
  };
  celana.src = selectedCelana;
}

    };
  </script>
</body>
</html>

